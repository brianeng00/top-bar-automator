{"version":3,"file":"EditableContent.js","sourceRoot":"","sources":["../../../src/EditableContent/EditableContent.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,6CAA6E;AAE7E,mEAA0G;AAI1G,IAAM,eAAe,GAAG,IAAA,kBAAU,EAAyC,UAAC,EAY3E,EAAE,GAAG;IAXL,IAAA,QAAQ,cAAA,EACR,mBAA6B,EAA7B,WAAW,mBAAG,eAAe,KAAA,EAC7B,MAAM,YAAA,EACN,iBAAgB,EAAhB,SAAS,mBAAG,IAAI,KAAA,EAChB,SAAS,eAAA,EACT,KAAK,WAAA,EACL,QAAQ,cAAA,EACR,OAAO,aAAA,EACP,SAAS,eAAA,EACT,MAAM,YAAA,EACH,KAAK,cAXmE,sHAY3E,CADQ;IAEF,IAAA,KAAoB,IAAA,gBAAQ,EAAC,CAAC,CAAC,EAA9B,KAAK,QAAA,EAAE,QAAQ,QAAe,CAAC;IAChC,IAAA,KAA4B,IAAA,gBAAQ,EAAC,KAAK,CAAC,EAA1C,SAAS,QAAA,EAAE,YAAY,QAAmB,CAAC;IAClD,IAAM,OAAO,GAAG,IAAA,cAAM,EAAkB,IAAI,CAAC,CAAC;IAE9C,IAAA,uBAAe,EAAC;QACf,IAAI,OAAO,CAAC,OAAO,EAAE;YACpB,IAAM,QAAQ,GAAG,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC;YAC7C,IAAI,QAAQ,KAAK,KAAK,EAAE;gBACvB,QAAQ,CAAC,QAAQ,CAAC,CAAC;aACnB;SACD;IACF,CAAC,EAAE,CAAC,KAAK,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC,CAAC;IAE9B,IAAM,WAAW,GAAG;QACnB,IAAI,CAAC,QAAQ,IAAI,CAAC,SAAS,EAAE;YAC3B,YAAY,CAAC,IAAI,CAAC,CAAC;SACpB;IACA,CAAC,CAAC;IAEF,IAAM,UAAU,GAAG,UAAC,CAAqC;QAC1D,YAAY,CAAC,KAAK,CAAC,CAAC;QACpB,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAG,CAAC,CAAC,CAAC;IACX,CAAC,CAAC;IAEF,IAAM,aAAa,GAAG,UAAC,CAAwC;QAChE,IAAI,CAAC,CAAC,GAAG,KAAK,OAAO,EAAE;YACrB,YAAY,CAAC,KAAK,CAAC,CAAC;SACrB;IACA,CAAC,CAAC;IAEJ,OAAO,CACN,8BAAC,+CAAsB,wBACb,MAAM,EACf,KAAK,EAAE,KAAK,EACZ,SAAS,EAAE,SAAS,EACpB,OAAO,EAAE,WAAW,gBACR,SAAS,IACjB,KAAK,GAER,CAAC,SAAS,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC3B;QACC,8BAAC,mCAAU,mBAAa,MAAM,EAAC,GAAG,EAAE,OAAO,IAAG,KAAK,IAAI,WAAW,CAAc;QAChF,8BAAC,kCAAS,eACA,UAAG,MAAM,WAAQ,EAC1B,IAAI,EAAC,MAAM,EACX,GAAG,EAAE,GAAG,EACR,KAAK,EAAE,KAAK,EACZ,QAAQ,EAAE,QAAQ,EAClB,WAAW,EAAE,WAAW,EACxB,QAAQ,EAAE,CAAC,EACX,MAAM,EAAE,UAAU,EAClB,SAAS,EAAE,aAAa,EACxB,SAAS,SACR,CAEA,CACH,CAAC,CAAC,CAAC,CACH,8BAAC,wCAAe,eACN,UAAG,MAAM,aAAU,EAC5B,EAAE,EAAE,SAAS,EACb,QAAQ,EAAE,QAAQ,EAClB,QAAQ,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAC3B,KAAK,EAAE,KAAK,IAEX,KAAK,IAAI,WAAW,CACJ,CAClB,CACuB,CACzB,CAAC;AACH,CAAC,CAAC,CAAC;AAEH,kBAAe,eAAe,CAAC","sourcesContent":["import React, { forwardRef, useLayoutEffect, useRef, useState } from \"react\";\n\nimport { EditableContentWrapper, EditableWrapper, EditInput, HiddenSpan } from \"./EditableContent.styles\";\nimport { EditableContentProps } from \"./EditableContent.types\";\n\n\nconst EditableContent = forwardRef<HTMLInputElement, EditableContentProps>(({\n\tonChange,\n\tplaceholder = \"Enter a title\",\n\tdataQA,\n\tcomponent = \"h1\",\n\tclassName,\n\tvalue,\n\tdisabled,\n\tonClick,\n\tariaLabel,\n\tonBlur,\n\t...props\n}, ref)  => {\n\tconst [width, setWidth] = useState(0);\n\tconst [isEditing, setIsEditing] = useState(false);\n\tconst spanRef = useRef<HTMLSpanElement>(null);\n\n\tuseLayoutEffect(() => {\n\t\tif (spanRef.current) {\n\t\t\tconst newWidth = spanRef.current.offsetWidth;\n\t\t\tif (newWidth !== width) {\n\t\t\t\tsetWidth(newWidth);\n\t\t\t}\n\t\t}\n\t}, [value, isEditing, width]);\n\n\tconst handleClick = () => {\n\t\tif (!disabled && !isEditing) {\n\t\t  setIsEditing(true);\n\t\t}\n\t  };\n\t\n\t  const handleBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n\t\tsetIsEditing(false);\n\t\tonBlur?.(e);\n\t  };\n\t\n\t  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n\t\tif (e.key === \"Enter\") {\n\t\t  setIsEditing(false);\n\t\t}\n\t  };\n\n\treturn (\n\t\t<EditableContentWrapper\n\t\t\tdata-qa={dataQA}\n\t\t\twidth={width}\n\t\t\tclassName={className}\n\t\t\tonClick={handleClick}\n\t\t\taria-label={ariaLabel}\n\t\t\t{...props}\n\t\t>\n\t\t\t{(isEditing && !disabled) ? (\n\t\t\t\t<>\n\t\t\t\t\t<HiddenSpan aria-hidden=\"true\" ref={spanRef}>{value || placeholder}</HiddenSpan>\n\t\t\t\t\t<EditInput\n\t\t\t\t\t\tdata-qa={`${dataQA}-input`}\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tref={ref}\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\tonKeyDown={handleKeyDown}\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t/>\n\t\t\t\t\t\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<EditableWrapper\n\t\t\t\t\tdata-qa={`${dataQA}-content`}\n\t\t\t\t\tas={component}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\ttabIndex={disabled ? -1 : 0}\n\t\t\t\t\tvalue={value}\n\t\t\t\t>\n\t\t\t\t\t{value || placeholder}\n\t\t\t\t</EditableWrapper>\n\t\t\t)}\n\t\t</EditableContentWrapper>\n\t);\n});\n\nexport default EditableContent;"]}