{"version":3,"file":"PageSlide.js","sourceRoot":"","sources":["../../../../src/LegacyComponents/PageSlide/PageSlide.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, {\n\tcreateContext, FC, ReactElement, useContext, useEffect, useRef, useState,\n} from \"react\";\nimport { createPortal } from \"react-dom\";\nimport styled, { keyframes } from \"styled-components\";\n\n/* eslint-disable @typescript-eslint/no-shadow */\n\ninterface Stack {\n\tid: React.ReactText\n\tchildren: ReactElement\n\tclosing?: boolean\n}\n\nexport interface Context {\n\tstack: Stack[]\n\tsetStack: (stack: Stack[]) => void\n\thandleOpenModal: (stack: Stack) => void\n\thandleCloseModal: (stack: React.ReactText) => void\n\thandleCloseAllModals: () => void\n}\n\ninterface ModalContainerProps {\n\tclosing?: boolean,\n\tidx: number\n\tonClose: () => void\n\tcloseClickOutside?: boolean\n\tchildren?: React.ReactNode\n}\n/** @deprecated this component has been deprecated */\nconst PageSlide = createContext<Context>({\n\tstack: [],\n\tsetStack: () => {},\n\thandleOpenModal: () => {},\n\thandleCloseModal: () => {},\n\thandleCloseAllModals: () => {},\n});\n\nconst emergence = keyframes`\n\tfrom {\n\t\ttransform: translateX(100%)\n\t}\n\n\tto {\n\t\ttransform: translateX(0)\n\t}\n`;\n\nconst closing = keyframes`\n\tfrom {\n\t\ttransform: translateX(0)\n\t}\n\n\tto {\n\t\ttransform: translateX(100%)\n\t}\n`;\n\nconst background = keyframes`\n\tfrom {\n\t\tbackground-color: rgba(0, 0, 0, 0);\n\t}\n\n\tto {\n\t\tbackground-color: rgba(0, 0, 0, .2);\n\t}\n`;\n\nconst hidingBackground = keyframes`\n\tfrom {\n\t\tbackground-color: rgba(0, 0, 0, .2);\n\t}\n\n\tto {\n\t\tbackground-color: rgba(0, 0, 0, 0);\n\t}\n`;\n\nconst SlideContainer = styled.div<{ closing?: boolean, idx: number }>`\n\twidth: calc(${({ idx }) => 100 - (idx * 2)}% - 110px);\n\theight: 100%;\n\toverflow-y: auto;\n\tbackground: white;\n\tborder-radius: 15px 0 0 15px;\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n\tz-index: ${({ idx }) => idx};\n\tanimation: ${(props) => props.closing ? closing : emergence} .2s linear;\n`;\n\nconst LeftBackgroundCover = styled.div<{ closing?: boolean, idx: number }>`\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, .2);\n\tz-index: ${(props) => props.idx};\n\tanimation: ${(props) => props.closing ? hidingBackground : background} .2s linear;\n`;\n\nexport const onClickHandler: (closeClickOutside: boolean, onClose: () => void) =>\n\tvoid = (closeClickOutside: boolean, onClose: () => void) => {\n\t\tif (closeClickOutside === false) {\n\t\t\treturn;\n\t\t}\n\t\tonClose();\n\t};\n\nconst ModalContainer: FC<ModalContainerProps> = ({\n\tchildren,\n\tclosing,\n\tidx,\n\tonClose,\n\tcloseClickOutside = true,\n}) => (\n\tcreatePortal(\n\t\t<>\n\t\t\t<LeftBackgroundCover closing={closing} idx={idx} onClick={() => onClickHandler(closeClickOutside, onClose)} />\n\t\t\t<SlideContainer closing={closing} idx={idx}>\n\t\t\t\t{children}\n\t\t\t</SlideContainer>\n\t\t</>,\n\t\t\tdocument.getElementById(\"root\") as HTMLElement,\n\t)\n);\n\n/** @deprecated this component has been deprecated */\nconst PageSlideContext: FC<{ children?: React.ReactNode }> = ({ children }) => {\n\tconst [stack, setStack] = useState<Stack[]>([]);\n\tconst stackRef = useRef<Stack[] | null>(null);\n\n\n\tuseEffect(() => {\n\t\tstackRef.current = stack;\n\n\t\tif (stack.length) {\n\t\t\tdocument.body.style.overflow = \"hidden\";\n\t\t} else {\n\t\t\tdocument.body.style.overflow = \"unset\";\n\t\t}\n\n\t\treturn () => {\n\t\t\tdocument.body.style.overflow = \"unset\";\n\t\t};\n\t}, [stack]);\n\n\tconst handleOpenModal = (element: Stack) => setStack((prev) => {\n\t\tconst newStack = [...prev, element];\n\n\t\tif (newStack.length === 6) {\n\t\t\treturn newStack.slice(1);\n\t\t}\n\n\t\treturn newStack;\n\t});\n\n\tconst handleCloseModal = (id: React.ReactText) => {\n\t\tsetStack((prev) => prev.map((el) => el.id === id ? { ...el, closing: true } : el));\n\n\t\tconst timerId = setTimeout(() => {\n\t\t\tsetStack((prev) => prev.filter((el) => el.id !== id));\n\t\t\tclearTimeout(timerId);\n\t\t}, 180);\n\t};\n\n\tconst handleCloseAllModals = () => {\n\t\tconst stack = stackRef.current || [];\n\t\tconst promiseArray = [];\n\n\t\tfor (let i = stack.length - 1; i >= 0; i -= 1) {\n\t\t\tconst promiseItems = new Promise(() => {\n\t\t\t\tsetStack((prev) => prev.map((el) => el.id === stack[i].id ? { ...el, closing: true } : el));\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tsetStack((prev) => prev.filter((el) => el.id !== stack[i].id));\n\t\t\t\t}, 180);\n\t\t\t});\n\n\t\t\tpromiseArray.push(promiseItems);\n\t\t}\n\n\t\tPromise.all(promiseArray);\n\n\t\tstackRef.current = null;\n\t};\n\n\treturn (\n\t\t<PageSlide.Provider\n\t\t\tvalue={{\n\t\t\t\tstack,\n\t\t\t\tsetStack,\n\t\t\t\thandleOpenModal,\n\t\t\t\thandleCloseModal,\n\t\t\t\thandleCloseAllModals,\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t\t{stack.map(({ id, children, closing }, i) => (\n\t\t\t\t<ModalContainer\n\t\t\t\t\tkey={id}\n\t\t\t\t\tclosing={closing}\n\t\t\t\t\tidx={i}\n\t\t\t\t\tonClose={() => handleCloseModal(id)}\n\t\t\t\t\tcloseClickOutside={false}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</ModalContainer>\n\t\t\t))}\n\t\t</PageSlide.Provider>\n\t);\n};\n/** @deprecated this component has been deprecated */\nconst usePageSlideContext = (): Context => useContext(PageSlide);\n\nexport { PageSlideContext, usePageSlideContext };\n"]}