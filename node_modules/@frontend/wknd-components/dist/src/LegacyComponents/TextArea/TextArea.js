"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var react_1 = __importDefault(require("react"));
var styleguide_1 = require("../../styleguide");
var uuid_1 = __importDefault(require("../../utils/uuid"));
var TextArea_styles_1 = require("./TextArea.styles");
/** @deprecated this component has been deprecated */
var TextArea = function (_a) {
    var dataQA = _a.dataQA, _b = _a.$isInvalid, $isInvalid = _b === void 0 ? false : _b, customCharacterLimitErrorMessage = _a.customCharacterLimitErrorMessage, _c = _a.value, value = _c === void 0 ? "" : _c, maxCharacters = _a.maxCharacters, _d = _a.$isDisabled, $isDisabled = _d === void 0 ? false : _d, _e = _a.maxVisibleRows, maxVisibleRows = _e === void 0 ? 8 : _e, invalidTextErrorMessage = _a.invalidTextErrorMessage, _f = _a.positionErrorMessage, positionErrorMessage = _f === void 0 ? "right" : _f, _g = _a.resize, resize = _g === void 0 ? "vertical" : _g, _h = _a.rows, rows = _h === void 0 ? 8 : _h, // setting default to 8 as the min-height was set to 145px and row of 8 is around 142px tall
    _j = _a.id, // setting default to 8 as the min-height was set to 145px and row of 8 is around 142px tall
    id = _j === void 0 ? (0, uuid_1.default)() : _j, label = _a.label, _k = _a.widthSize, widthSize = _k === void 0 ? styleguide_1.widthSizes.full : _k, ariaLabel = _a.ariaLabel, _l = _a.onChange, onChange = _l === void 0 ? function () { } : _l, _m = _a.hideCharacterLimit, hideCharacterLimit = _m === void 0 ? false : _m, className = _a.className, name = _a.name, placeholder = _a.placeholder;
    var characterLimitErrorMessage = function (characterLimit) {
        // default error message
        var errorMessage = "".concat(characterLimit, " characters. Please reduce the length of your message.");
        if (customCharacterLimitErrorMessage) {
            errorMessage = "".concat(characterLimit, " ").concat(customCharacterLimitErrorMessage);
        }
        return react_1.default.createElement(TextArea_styles_1.ErrorMessageSpan, null, errorMessage);
    };
    var getCharacterLimitMessage = function () {
        var characterLimit = "".concat(value.length, " / ").concat(maxCharacters || 1);
        // When the text area value length is longer than the max character limit, show an error message
        var valueIsTooHigh = maxCharacters && value.length > maxCharacters;
        if (valueIsTooHigh) {
            return characterLimitErrorMessage(characterLimit);
        }
        return "".concat(characterLimit, " characters");
    };
    var modifiedOnChange = function (event) {
        if ($isDisabled)
            return;
        var lines = Math.round((event.scrollHeight / TextArea_styles_1.LINE_HEIGHT) - 1);
        var maxRows = maxVisibleRows || rows;
        if (lines > maxRows) {
            onChange(event.value);
            return;
        }
        event.style.height = "inherit";
        event.style.height = "".concat(event.scrollHeight, "px");
        onChange(event.value);
    };
    var textAreaLabel = label && (
    // eslint-disable-next-line jsx-a11y/label-has-for
    react_1.default.createElement("label", { htmlFor: id }, label));
    return (react_1.default.createElement("div", { "data-qa": dataQA, className: className },
        react_1.default.createElement(TextArea_styles_1.LabelWrapper, { "$isInvalid": $isInvalid, "$isDisabled": $isDisabled }, textAreaLabel),
        react_1.default.createElement(TextArea_styles_1.ContainerTextArea, { widthSize: widthSize },
            react_1.default.createElement(TextArea_styles_1.StyledTextArea, { widthSize: widthSize, name: name, id: id, "aria-label": ariaLabel, rows: rows, "$isInvalid": $isInvalid, "$isDisabled": $isDisabled, value: !value ? placeholder : value, onChange: function (event) { return modifiedOnChange(event.target); }, resize: resize }),
            hideCharacterLimit
                || (react_1.default.createElement(TextArea_styles_1.Message, { positionErrorMessage: positionErrorMessage, "data-qa": "".concat(dataQA, "-character-limit") }, getCharacterLimitMessage())),
            $isInvalid && invalidTextErrorMessage
                && (react_1.default.createElement(TextArea_styles_1.Message, { positionErrorMessage: positionErrorMessage, "data-qa": "".concat(dataQA, "-character-limit") },
                    react_1.default.createElement(TextArea_styles_1.ErrorMessageSpan, null, invalidTextErrorMessage))))));
};
exports.default = TextArea;
//# sourceMappingURL=TextArea.js.map