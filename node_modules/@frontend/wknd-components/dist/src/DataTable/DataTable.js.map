{"version":3,"file":"DataTable.js","sourceRoot":"","sources":["../../../src/DataTable/DataTable.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, {\n\tReactNode,\n\tuseCallback,\n\tuseEffect,\n\tuseRef,\n\tuseState,\n} from \"react\";\nimport ReactDataTable from \"react-data-table-component\";\nimport { createPortal } from \"react-dom\";\n\nimport Checkbox from \"../Checkbox/Checkbox\";\nimport { Icon } from \"../Icon/Icon\";\nimport Pagination from \"../Pagination/Pagination\";\nimport Spinner from \"../Spinner/Spinner\";\nimport { colors, Margins, spacingMap } from \"../styleguide\";\nimport Typography from \"../Typography/Typography\";\n\nimport {\n\tCustomDashboardText,\n\tcustomStyles,\n\tIconWrapper,\n\tNoDataCustomWrapper,\n\tTableWrapper,\n} from \"./DataTable.styles\";\nimport {\n\tPaginationComponent,\n\tSortOrder,\n\tTableColumn,\n\tTableProps,\n} from \"./DataTable.types\";\nimport { TableActionsBar, TableActionsBarProps } from \"./TableActionsBar\";\n\nexport type RowSpacing = \"snug\" | \"default\" | \"loose\";\n\nexport interface DataTableProps<T> extends TableProps<T>, Margins {\n\tdataQA: string;\n\thasPagination?: boolean;\n\tisLoading?: boolean;\n\tnoDataHeader?: string;\n\tnoDataText?: string;\n\tnoDataImage?: React.ReactNode;\n\tnoFilterResultsImage?: React.ReactNode;\n\tnoDataAction?: React.ReactNode;\n\tareRowsSelectable?: boolean;\n\trowSpacing?: RowSpacing;\n\ttableActionsProps?: TableActionsBarProps;\n}\n\nconst NoDataCustom = ({\n\theader, message, action, image,\n}: { header?: string; message?: string; action?: ReactNode, image?: ReactNode }) => (\n\t<NoDataCustomWrapper>\n\t\t{image}\n\t\t<Typography\n\t\t\tvariant=\"displayMedium\"\n\t\t\tcomponent=\"h2\"\n\t\t\tdataQA=\"dashboard-header\"\n\t\t\tm={`${spacingMap.md} 0 0 0`}\n\t\t>\n\t\t\t{header}\n\t\t</Typography>\n\t\t<CustomDashboardText\n\t\t\tvariant=\"bodyCopy\"\n\t\t\tcomponent=\"p\"\n\t\t\tdataQA=\"dashboard-message\"\n\t\t\tm={`${spacingMap.xs} 0 ${spacingMap.md} 0`}\n\t\t>\n\t\t\t{message}\n\t\t</CustomDashboardText>\n\t\t{action}\n\t</NoDataCustomWrapper>\n);\n\n\n// eslint-disable-next-line @typescript-eslint/comma-dangle, comma-spacing\nconst DataTable = <T,>({\n\tdataQA,\n\thasPagination = false,\n\tisLoading = false,\n\tnoDataHeader = \"No records to show\",\n\tnoDataText = \"\",\n\tnoDataImage = null,\n\tnoDataAction = null,\n\tareRowsSelectable = false,\n\trowSpacing = \"default\",\n\ttableActionsProps,\n\tonSelectedRowsChange,\n\tclearSelectedRows,\n\tsubHeaderComponent,\n\tm,\n\tmt,\n\tmb,\n\tml,\n\tmr,\n\t...props\n}: DataTableProps<T>) => {\n\n\tconst defaultSortMessage = \"not sorted yet\";\n\tconst [sortDirection, setSortDirection] = useState(defaultSortMessage);\n\n\tconst customSort = (selectedColumn?: TableColumn<T>, direction?: SortOrder) => {\n\t\tconst ariaDirection = direction === \"desc\" ? \"down\" : \"up\";\n\t\tconst columnName = selectedColumn?.name as string;\n\t\tsetSortDirection(columnName ? `sorted ${ariaDirection} by ${columnName}` : defaultSortMessage);\n\t};\n\n\tconst getRowHeight = () => {\n\t\tswitch (rowSpacing) {\n\t\t\tcase \"snug\":\n\t\t\t\treturn spacingMap.xl;\n\t\t\tcase \"loose\":\n\t\t\t\treturn \"4.5rem\";\n\t\t\tdefault:\n\t\t\t\treturn spacingMap.xxl;\n\t\t}\n\t};\n\n\tconst [selectedCount, setSelectedCount] = useState<number>(0);\n\tconst [toggleCleared, setToggleCleared] = useState(false);\n\tconst tableWrapperRef = useRef<HTMLDivElement>(null);\n\n\tconst setSortableColumnTabIndex = (tabIndex: string) => {\n\t\tconst allSortableColumns = tableWrapperRef.current?.querySelectorAll(\".rdt_TableCol_Sortable\");\n\t\tif (tabIndex === \"0\") {\n\t\t\treturn allSortableColumns?.forEach((element) => element.setAttribute(\"tabindex\", \"0\"));\n\t\t}\n\t\tallSortableColumns?.forEach((element) => element.setAttribute(\"tabindex\", \"-1\"));\n\t};\n\n\tconst handleDeselect = useCallback(() => {\n\t\tsetToggleCleared(!toggleCleared);\n\t\tsetSelectedCount(0);\n\t\tsetSortableColumnTabIndex(\"0\");\n\t\tif (tableActionsProps?.handleDeselect) {\n\t\t\ttableActionsProps.handleDeselect();\n\t\t}\n\t}, [toggleCleared, tableActionsProps]);\n\n\t// use clearSelectedRows in case it is passed by the parent application\n\tconst handleClearSelectedRows = () => clearSelectedRows || toggleCleared;\n\n\tconst handleOnSelectedRowsChange = useCallback((selected: {\n\t\tallSelected: boolean;\n\t\tselectedCount: number;\n\t\tselectedRows: T[];\n\t}) => {\n\t\tif (onSelectedRowsChange) {\n\t\t\t// still call onSelectedRowsChange in case if a function is passed\n\t\t\t// so data can be returned to parent app\n\t\t\tonSelectedRowsChange(selected);\n\t\t}\n\n\t\tif (!tableActionsProps) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (selected.selectedCount === 0) {\n\t\t\tsetSortableColumnTabIndex(\"0\");\n\t\t\tsetSelectedCount(0);\n\t\t\treturn;\n\t\t}\n\t\t// set tabindex on columns to prevent tabbing when the action bar is showing\n\t\tsetSortableColumnTabIndex(\"-1\");\n\t\tsetSelectedCount(selected.selectedCount);\n\t}, [onSelectedRowsChange, tableActionsProps]);\n\n\tuseEffect(() => {\n\t\tif (clearSelectedRows) {\n\t\t\thandleOnSelectedRowsChange({\n\t\t\t\tallSelected: false,\n\t\t\t\tselectedCount: 0,\n\t\t\t\tselectedRows: [],\n\t\t\t});\n\t\t}\n\t}, [clearSelectedRows, handleOnSelectedRowsChange]);\n\n\tconst selectableRowsComponentProps = {\n\t\tdataQA: `${dataQA}-checkbox`,\n\t\tisIndeterminate: (isIndeterminate: boolean) => isIndeterminate,\n\t};\n\n\tconst tableHead = tableWrapperRef.current?.querySelector(\".rdt_TableHead\");\n\n\treturn (\n\t\t<TableWrapper\n\t\t\tref={tableWrapperRef}\n\t\t\tdata-qa={dataQA}\n\t\t\taria-label=\"Sortable Table\"\n\t\t\thasPagination={hasPagination}\n\t\t\tm={m}\n\t\t\tmt={mt}\n\t\t\tmb={mb}\n\t\t\tml={ml}\n\t\t\tmr={mr}\n\t\t>\n\t\t\t{(selectedCount > 0 && tableHead && tableActionsProps) && (\n\t\t\t\tcreatePortal(\n\t\t\t\t\t<TableActionsBar\n\t\t\t\t\t\tselectedCountMessage={tableActionsProps.selectedCountMessage}\n\t\t\t\t\t\thandleDeselect={handleDeselect}\n\t\t\t\t\t\ttableBulkActions={tableActionsProps.tableBulkActions || []}\n\t\t\t\t\t/>,\n\t\t\t\t\ttableHead,\n\t\t\t\t)\n\t\t\t)}\n\t\t\t<ReactDataTable\n\t\t\t\tdefaultSortAsc={false}\n\t\t\t\tcustomStyles={customStyles(getRowHeight(), props?.expandableRows || false, selectedCount)}\n\t\t\t\tsortIcon={(\n\t\t\t\t\t<IconWrapper\n\t\t\t\t\t\taria-label={sortDirection}\n\t\t\t\t\t\ttabIndex={-1}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\tcolor={colors.black}\n\t\t\t\t\t\t\tname=\"ChevronDown\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</IconWrapper>\n\t\t\t\t)}\n\t\t\t\tpersistTableHead\n\t\t\t\tnoDataComponent={\n\t\t\t\t\tisLoading\n\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t<Spinner\n\t\t\t\t\t\t\t\tsize=\"Medium\"\n\t\t\t\t\t\t\t\tdataQA=\"Loader\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t\t: <NoDataCustom header={noDataHeader} message={noDataText} action={noDataAction} image={noDataImage} />\n\t\t\t\t}\n\t\t\t\tpaginationPerPage={props.paginationPerPage ?? 20}\n\t\t\t\tpagination={hasPagination}\n\t\t\t\tpaginationComponent={Pagination as PaginationComponent}\n\t\t\t\tselectableRows={areRowsSelectable}\n\t\t\t\tselectableRowsComponent={Checkbox as unknown as ReactNode}\n\t\t\t\tonSort={customSort}\n\t\t\t\tselectableRowsComponentProps={selectableRowsComponentProps}\n\t\t\t\texpandableIcon={{\n\t\t\t\t\tcollapsed: <Icon name=\"ChevronRight\" />,\n\t\t\t\t\texpanded: <Icon name=\"ChevronDown\" />,\n\t\t\t\t}}\n\t\t\t\tonSelectedRowsChange={handleOnSelectedRowsChange}\n\t\t\t\tclearSelectedRows={handleClearSelectedRows()}\n\t\t\t\tsubHeaderComponent={subHeaderComponent}\n\t\t\t\tsubHeader={!!subHeaderComponent}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t</TableWrapper>\n\t);\n};\n\nDataTable.displayName = \"DataTable\";\nexport default DataTable;\n"]}