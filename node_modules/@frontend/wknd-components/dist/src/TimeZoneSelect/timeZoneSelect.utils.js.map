{"version":3,"file":"timeZoneSelect.utils.js","sourceRoot":"","sources":["../../../src/TimeZoneSelect/timeZoneSelect.utils.ts"],"names":[],"mappings":";;;AAEA,IAAM,mBAAmB,GAAG;IAC3B,IAAM,SAAS,GAAG,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;IAErD,yCAAyC;IACzC,IAAM,eAAe,GAAG,UACvB,QAAgB,EAChB,YAAoD,EACpD,GAAS;QAET,IAAM,SAAS,GAAG,IAAI,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE;YAClD,QAAQ,UAAA;YACR,YAAY,cAAA;SACZ,CAAC,CAAC;QACH,IAAM,KAAK,GAAG,SAAS,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;QAE3C,IAAM,YAAY,GAAG,KAAK,CAAC,IAAI,CAAC,UAAC,IAAI,IAAK,OAAA,IAAI,CAAC,IAAI,KAAK,cAAc,EAA5B,CAA4B,CAAC,CAAC;QACxE,QAAQ,YAAY,EAAE;YACrB,KAAK,YAAY,CAAC;YAAC,KAAK,aAAa;gBACpC,OAAO,YAAY,aAAZ,YAAY,uBAAZ,YAAY,CAAE,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;YAC/C,KAAK,OAAO;gBACX,OAAO,YAAY,aAAZ,YAAY,uBAAZ,YAAY,CAAE,KAAK,CAAC;SAC3B;IACH,CAAC,CAAC;IAEF,IAAM,YAAY,GAAqB,EAAE,CAAC;IAE1C,+CAA+C;IAC/C,SAAS,CAAC,OAAO,CAAC,UAAC,QAAQ;QAC1B,IAAM,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC;QACvB,IAAM,UAAU,GAAG,eAAe,CAAC,QAAQ,EAAE,YAAY,EAAE,GAAG,CAAC,CAAC;QAChE,IAAM,WAAW,GAAG,eAAe,CAAC,QAAQ,EAAE,OAAO,EAAE,GAAG,CAAC,CAAC;QAC5D,IAAM,WAAW,GAAG,eAAe,CAAC,QAAQ,EAAE,aAAa,EAAE,GAAG,CAAC,CAAC;QAElE,IAAI,CAAC,UAAU,IAAI,CAAC,WAAW,IAAI,CAAC,WAAW,EAAE;YAChD,OAAO;SACP;QAED,IAAM,QAAQ,GAAG,eAAQ,UAAU,iBAAO,WAAW,eAAK,QAAQ,MAAG,CAAC;QAEtE,2EAA2E;QAC3E,IAAM,QAAQ,GAAG,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;QAEnG,YAAY,CAAC,IAAI,CAAC;YACjB,KAAK,EAAE,QAAQ;YACf,KAAK,EAAE,QAAQ;YACf,MAAM,EAAE,QAAQ;SAChB,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IACH,YAAY,CAAC,IAAI,CAAC,UAAC,KAAK,EAAE,KAAK,IAAK,OAAA,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM,EAA3B,CAA2B,CAAC,CAAC;IAEjE,OAAO,YAAY,CAAC;AACrB,CAAC,CAAC;AAEW,QAAA,gBAAgB,GAAG,mBAAmB,EAAE,CAAC","sourcesContent":["import { TimeZoneOption } from \"./TimeZoneSelect\";\n\nconst getTimeZonesWithGMT = (): TimeZoneOption[] | undefined => {\n\tconst timeZones = Intl.supportedValuesOf(\"timeZone\");\n\n\t// Helper function to get a timezone part\n\tconst getTimeZonePart = (\n\t\ttimeZone: string,\n\t\ttimeZoneName: \"longOffset\" | \"short\" | \"shortOffset\",\n\t\tnow: Date,\n\t) => {\n\t\tconst formatter = new Intl.DateTimeFormat(\"en-US\", {\n\t\t\ttimeZone,\n\t\t\ttimeZoneName,\n\t\t});\n\t\tconst parts = formatter.formatToParts(now);\n\n\t\tconst timeZonePart = parts.find((part) => part.type === \"timeZoneName\");\n\t\tswitch (timeZoneName) {\n\t\t\tcase \"longOffset\": case \"shortOffset\":\n\t\t\t\treturn timeZonePart?.value.replace(\"GMT\", \"\");\n\t\t\tcase \"short\":\n\t\t\t\treturn timeZonePart?.value;\n\t  }\n\t};\n\n\tconst timeZoneList: TimeZoneOption[] = [];\n\n\t// Build the list of timezones with GMT offsets\n\ttimeZones.forEach((timeZone) => {\n\t\tconst now = new Date();\n\t\tconst longOffset = getTimeZonePart(timeZone, \"longOffset\", now);\n\t\tconst longGeneric = getTimeZonePart(timeZone, \"short\", now);\n\t\tconst shortOffset = getTimeZonePart(timeZone, \"shortOffset\", now);\n\n\t\tif (!longOffset || !longGeneric || !shortOffset) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst gmtLabel = `(GMT ${longOffset}) - ${longGeneric} (${timeZone})`;\n\n\t\t// needed to account for 30min or 45min offsets otherwise sorting is a mess\n\t\tconst tzOffset = Number(shortOffset.replace(\":00\", \"\").replace(\":30\", \".5\").replace(\":45\", \".75\"));\n\n\t\ttimeZoneList.push({\n\t\t\tlabel: gmtLabel,\n\t\t\tvalue: timeZone,\n\t\t\toffset: tzOffset,\n\t\t});\n\t});\n\ttimeZoneList.sort((zoneA, zoneB) => zoneA.offset - zoneB.offset);\n\n\treturn timeZoneList;\n};\n\nexport const timeZonesWithGMT = getTimeZonesWithGMT();\n"]}