"use strict";
var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var react_1 = __importDefault(require("react"));
var set_1 = __importDefault(require("date-fns/set"));
var subMonths_1 = __importDefault(require("date-fns/subMonths"));
var styled_components_1 = __importDefault(require("styled-components"));
var Select_1 = require("../Select");
var StyledYearSelect = (0, styled_components_1.default)(Select_1.Select)(templateObject_1 || (templateObject_1 = __makeTemplateObject(["\n\tflex: none;\n\twidth: 88px;\n"], ["\n\tflex: none;\n\twidth: 88px;\n"])));
var rangeOfYears = function (start, stop, step) {
    return Array.from({
        // calculate the length of the array based on the stop, start and step
        length: (stop - start) / step + 1,
    }, 
    // takes the start year and adds one by using the index and the step
    function (_, elementIndex) { return start + (elementIndex * step); });
};
var YearSelect = function (_a) {
    var currentSelectedYear = _a.currentSelectedYear, dataQA = _a.dataQA, minYear = _a.minYear, maxYear = _a.maxYear, month = _a.month, setDate = _a.setDate, calendarOffset = _a.calendarOffset, setCalendarOffset = _a.setCalendarOffset, calendarIndex = _a.calendarIndex;
    // years will be sorted earliest to latest [2022, 2023, 2024]
    var yearsArray = rangeOfYears(minYear, maxYear, 1);
    var handleOnChange = function (event) {
        var _a;
        var selectedYear = Number((_a = event.target) === null || _a === void 0 ? void 0 : _a.value);
        var newDate = (0, set_1.default)(new Date(), { month: month, year: selectedYear });
        // index of month names is one less than calendar month
        var firstCalDate = (0, subMonths_1.default)(newDate, calendarIndex);
        setDate(firstCalDate);
        if (calendarOffset > 0 || calendarOffset < 0) {
            setCalendarOffset(0);
        }
    };
    return (react_1.default.createElement(StyledYearSelect, { dataQA: "".concat(dataQA, "-year-select"), onChange: handleOnChange, value: currentSelectedYear, name: "year-select", "aria-label": "select a year" }, yearsArray.map(function (yearOption) { return (react_1.default.createElement("option", { value: yearOption, key: "".concat(yearOption, "-").concat(dataQA), "data-qa": "".concat(dataQA, "-").concat(yearOption, "-year-option") }, yearOption)); })));
};
exports.default = YearSelect;
var templateObject_1;
//# sourceMappingURL=YearSelect.js.map