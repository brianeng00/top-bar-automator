{"version":3,"file":"YearSelect.js","sourceRoot":"","sources":["../../../src/DatePicker/YearSelect.tsx"],"names":[],"mappings":";;;;;;;;;AAAA,gDAA2C;AAC3C,qDAA+B;AAC/B,iEAA2C;AAC3C,wEAAuC;AAEvC,oCAAmC;AAcnC,IAAM,gBAAgB,GAAG,IAAA,2BAAM,EAAC,eAAM,CAAC,sGAAA,mCAGtC,IAAA,CAAC;AAEF,IAAM,YAAY,GAAG,UAAC,KAAa,EAAE,IAAY,EAAE,IAAY;IAC9D,OAAA,KAAK,CAAC,IAAI,CACT;QACC,sEAAsE;QACtE,MAAM,EAAE,CAAC,IAAI,GAAG,KAAK,CAAC,GAAG,IAAI,GAAG,CAAC;KACjC;IACD,oEAAoE;IACpE,UAAC,CAAC,EAAE,YAAY,IAAK,OAAA,KAAK,GAAG,CAAC,YAAY,GAAG,IAAI,CAAC,EAA7B,CAA6B,CAClD;AAPD,CAOC,CAAC;AAEH,IAAM,UAAU,GAAG,UAAC,EAUF;QATjB,mBAAmB,yBAAA,EACnB,MAAM,YAAA,EACN,OAAO,aAAA,EACP,OAAO,aAAA,EACP,KAAK,WAAA,EACL,OAAO,aAAA,EACP,cAAc,oBAAA,EACd,iBAAiB,uBAAA,EACjB,aAAa,mBAAA;IAEb,6DAA6D;IAC7D,IAAM,UAAU,GAAG,YAAY,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC;IAErD,IAAM,cAAc,GAAG,UAAC,KAAqC;;QAC5D,IAAM,YAAY,GAAG,MAAM,CAAC,MAAA,KAAK,CAAC,MAAM,0CAAE,KAAK,CAAC,CAAC;QAEjD,IAAM,OAAO,GAAG,IAAA,aAAG,EAAC,IAAI,IAAI,EAAE,EAAE,EAAE,KAAK,OAAA,EAAE,IAAI,EAAE,YAAY,EAAE,CAAC,CAAC;QAC/D,uDAAuD;QACvD,IAAM,YAAY,GAAG,IAAA,mBAAS,EAAC,OAAO,EAAE,aAAa,CAAC,CAAC;QAEvD,OAAO,CAAC,YAAY,CAAC,CAAC;QAEtB,IAAI,cAAc,GAAG,CAAC,IAAI,cAAc,GAAG,CAAC,EAAE;YAC7C,iBAAiB,CAAC,CAAC,CAAC,CAAC;SACrB;IACF,CAAC,CAAC;IAEF,OAAO,CACN,8BAAC,gBAAgB,IAChB,MAAM,EAAE,UAAG,MAAM,iBAAc,EAC/B,QAAQ,EAAE,cAAc,EACxB,KAAK,EAAE,mBAAmB,EAC1B,IAAI,EAAC,aAAa,gBACP,eAAe,IAEzB,UAAU,CAAC,GAAG,CAAC,UAAC,UAAU,IAAK,OAAA,CAC/B,0CACC,KAAK,EAAE,UAAU,EACjB,GAAG,EAAE,UAAG,UAAU,cAAI,MAAM,CAAE,aACrB,UAAG,MAAM,cAAI,UAAU,iBAAc,IAE7C,UAAU,CACH,CACT,EAR+B,CAQ/B,CAAC,CACgB,CACnB,CAAC;AACH,CAAC,CAAC;AAEF,kBAAe,UAAU,CAAC","sourcesContent":["import React, { ChangeEvent } from \"react\";\nimport set from \"date-fns/set\";\nimport subMonths from \"date-fns/subMonths\";\nimport styled from \"styled-components\";\n\nimport { Select } from \"../Select\";\n\ntype YearSelectProps = {\n\tdataQA: string,\n\tcurrentSelectedYear: number,\n\tminYear: number,\n\tmaxYear: number,\n\tmonth: number,\n\tsetDate: (newDate: Date) => void,\n\tcalendarOffset: number,\n\tsetCalendarOffset: (newOffset: number) => void,\n\tcalendarIndex: number,\n};\n\nconst StyledYearSelect = styled(Select)`\n\tflex: none;\n\twidth: 88px;\n`;\n\nconst rangeOfYears = (start: number, stop: number, step: number) =>\n\tArray.from<number[], number>(\n\t\t{\n\t\t\t// calculate the length of the array based on the stop, start and step\n\t\t\tlength: (stop - start) / step + 1,\n\t\t},\n\t\t// takes the start year and adds one by using the index and the step\n\t\t(_, elementIndex) => start + (elementIndex * step),\n\t);\n\nconst YearSelect = ({\n\tcurrentSelectedYear,\n\tdataQA,\n\tminYear,\n\tmaxYear,\n\tmonth,\n\tsetDate,\n\tcalendarOffset,\n\tsetCalendarOffset,\n\tcalendarIndex,\n}: YearSelectProps) => {\n\t// years will be sorted earliest to latest [2022, 2023, 2024]\n\tconst yearsArray = rangeOfYears(minYear, maxYear, 1);\n\n\tconst handleOnChange = (event: ChangeEvent<HTMLSelectElement>) => {\n\t\tconst selectedYear = Number(event.target?.value);\n\n\t\tconst newDate = set(new Date(), { month, year: selectedYear });\n\t\t// index of month names is one less than calendar month\n\t\tconst firstCalDate = subMonths(newDate, calendarIndex);\n\n\t\tsetDate(firstCalDate);\n\n\t\tif (calendarOffset > 0 || calendarOffset < 0) {\n\t\t\tsetCalendarOffset(0);\n\t\t}\n\t};\n\n\treturn (\n\t\t<StyledYearSelect\n\t\t\tdataQA={`${dataQA}-year-select`}\n\t\t\tonChange={handleOnChange}\n\t\t\tvalue={currentSelectedYear}\n\t\t\tname=\"year-select\"\n\t\t\taria-label=\"select a year\"\n\t\t>\n\t\t\t{yearsArray.map((yearOption) => (\n\t\t\t\t<option\n\t\t\t\t\tvalue={yearOption}\n\t\t\t\t\tkey={`${yearOption}-${dataQA}`}\n\t\t\t\t\tdata-qa={`${dataQA}-${yearOption}-year-option`}\n\t\t\t\t>\n\t\t\t\t\t{yearOption}\n\t\t\t\t</option>\n\t\t\t))}\n\t\t</StyledYearSelect>\n\t);\n};\n\nexport default YearSelect;\n"]}