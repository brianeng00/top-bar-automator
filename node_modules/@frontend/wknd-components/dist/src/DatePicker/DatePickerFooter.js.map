{"version":3,"file":"DatePickerFooter.js","sourceRoot":"","sources":["../../../src/DatePicker/DatePickerFooter.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,6CAAuF;AAEvF,4DAAsC;AACtC,4CAA2C;AAE3C,yDAA6D;AAC7D,uDAAqF;AACrF,qEAA4F;AAC5F,uEAAyE;AAczE,IAAM,gBAAgB,GAAG,UAAC,EAWF;QAVvB,YAAY,kBAAA,EACZ,wBAAwB,EAAxB,gBAAgB,mBAAG,KAAK,KAAA,EACxB,SAAS,eAAA,EACT,OAAO,aAAA,EACP,eAAe,qBAAA,EACf,aAAa,mBAAA,EACb,kBAAmC,EAAnC,UAAU,mBAAG,0CAAsB,KAAA,EACnC,WAAW,iBAAA,EACX,OAAO,aAAA,EACP,OAAO,aAAA;IAEC,IAAA,oBAAoB,GAAK,IAAA,sDAA2B,GAAE,qBAAlC,CAAmC;IAC/D,IAAM,YAAY,GAAG,IAAA,cAAM,EAAmB,IAAI,CAAC,CAAC;IAE9C,IAAA,KAAsC,IAAA,gBAAQ,EAAS,EAAE,CAAC,EAAzD,cAAc,QAAA,EAAE,iBAAiB,QAAwB,CAAC;IAC3D,IAAA,KAAkC,IAAA,gBAAQ,EAAS,EAAE,CAAC,EAArD,YAAY,QAAA,EAAE,eAAe,QAAwB,CAAC;IAE7D,IAAM,cAAc,GAAG,IAAA,+BAAY,EAAC,cAAc,EAAE,UAAU,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;IAClF,IAAM,YAAY,GAAG,IAAA,+BAAY,EAAC,YAAY,EAAE,UAAU,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;IAE9E,IAAA,iBAAS,EAAC;QACT,IAAM,iBAAiB,GAAG,SAAS,CAAC,CAAC,CAAC,IAAA,iCAAc,EAAC,SAAS,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QACjF,iBAAiB,CAAC,iBAAiB,CAAC,CAAC;QAErC,IAAM,eAAe,GAAG,OAAO,CAAC,CAAC,CAAC,IAAA,iCAAc,EAAC,OAAO,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QAC3E,eAAe,CAAC,eAAe,CAAC,CAAC;IAClC,CAAC,EAAE,CAAC,SAAS,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC,CAAC;IAErC,IAAM,kBAAkB,GAAG;QAC1B,YAAY,EAAE,CAAC;QACf,oBAAoB,EAAE,CAAC;IACxB,CAAC,CAAC;IAEF,IAAM,oBAAoB,GAAG,UAAC,CAAiC;QAC9D,IAAI,CAAC,CAAC,EAAE;YACP,OAAO;SACP;QAED,iBAAiB,CAAC,CAAC,aAAD,CAAC,uBAAD,CAAC,CAAE,MAAM,CAAC,KAAK,CAAC,CAAC;IACpC,CAAC,CAAC;IAEF,IAAM,kBAAkB,GAAG,UAAC,CAAiC;QAC5D,IAAI,CAAC,CAAC,EAAE;YACP,OAAO;SACP;QAED,eAAe,CAAC,CAAC,aAAD,CAAC,uBAAD,CAAC,CAAE,MAAM,CAAC,KAAK,CAAC,CAAC;IAClC,CAAC,CAAC;IAEF,IAAM,qBAAqB,GAAG;QAC7B,IAAI,CAAC,cAAc,EAAE;YACpB,IAAI,CAAC,cAAc,EAAE;gBACpB,eAAe,EAAE,CAAC;gBAClB,OAAO;aACP;YACD,OAAO,IAAA,oCAAiB,EAAC,iBAAiB,EAAE,UAAU,EAAE,SAAS,CAAC,CAAC;SACnE;QAED,eAAe,CAAC,cAAc,CAAC,CAAC;IACjC,CAAC,CAAC;IAEF,IAAM,mBAAmB,GAAG;QAC3B,IAAI,CAAC,YAAY,EAAG;YACnB,IAAI,CAAC,YAAY,EAAE;gBAClB,aAAa,EAAE,CAAC;gBAChB,OAAO;aACP;YACD,OAAO,IAAA,oCAAiB,EAAC,eAAe,EAAE,UAAU,EAAE,OAAO,CAAC,CAAC;SAC/D;QAED,aAAa,CAAC,YAAY,CAAC,CAAC;IAC7B,CAAC,CAAC;IAEF,IAAM,sBAAsB,GAAG,UAAC,KAAuC;QACtE,IAAI,CAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,GAAG,MAAK,OAAO,EAAE;YAC3B,OAAO;SACP;QAED,IAAI,CAAC,cAAc,EAAE;YACpB,IAAI,CAAC,cAAc,EAAE;gBACpB,eAAe,EAAE,CAAC;gBAClB,OAAO;aACP;YACD,OAAO,IAAA,oCAAiB,EAAC,iBAAiB,EAAE,UAAU,EAAE,SAAS,CAAC,CAAC;SACnE;QAED,eAAe,CAAC,cAAc,CAAC,CAAC;QAEhC,IAAI,YAAY,CAAC,OAAO,IAAI,CAAC,OAAO,IAAI,cAAc,EAAE;YACvD,YAAY,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;SAC7B;IACF,CAAC,CAAC;IAEF,IAAM,oBAAoB,GAAG,UAAC,KAAuC;QACpE,IAAI,CAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,GAAG,MAAK,OAAO,EAAE;YAC3B,OAAO;SACP;QAED,IAAI,CAAC,YAAY,EAAG;YACnB,IAAI,CAAC,YAAY,EAAE;gBAClB,aAAa,EAAE,CAAC;gBAChB,OAAO;aACP;YACD,OAAO,IAAA,oCAAiB,EAAC,eAAe,EAAE,UAAU,EAAE,OAAO,CAAC,CAAC;SAC/D;QAED,aAAa,CAAC,YAAY,CAAC,CAAC;IAC7B,CAAC,CAAC;IAEF,OAAO,CACN,8BAAC,sCAAY,IAAC,UAAU,EAAE,gBAAgB;QAExC,gBAAgB,IAAI,CACnB,8BAAC,wCAAc;YACd,8BAAC,qCAAW,IACX,MAAM,EAAC,YAAY,EACnB,EAAE,EAAC,YAAY,EACf,QAAQ,EAAE,UAAC,EAAS;wBAAP,KAAK,WAAA;oBAAO,OAAA,oBAAoB,CAAC,KAAK,CAAC;gBAA3B,CAA2B,EACpD,KAAK,EAAE,cAAc,EACrB,MAAM,EAAE,qBAAqB,EAC7B,OAAO,EAAE,sBAAsB,gBACpB,YAAY,EACvB,WAAW,EAAE,WAAW,IAAI,UAAU,GACrC;YACF,8BAAC,8BAAI,OAAG;YACR,8BAAC,qCAAW,IACX,MAAM,EAAC,UAAU,EACjB,EAAE,EAAC,UAAU,EACb,WAAW,EAAE,WAAW,IAAI,UAAU,EACtC,QAAQ,EAAE,UAAC,EAAS;wBAAP,KAAK,WAAA;oBAAO,OAAA,kBAAkB,CAAC,KAAK,CAAC;gBAAzB,CAAyB,EAClD,KAAK,EAAE,YAAY,EACnB,OAAO,EAAE,oBAAoB,EAC7B,MAAM,EAAE,mBAAmB,EAC3B,GAAG,EAAE,YAAY,gBACN,UAAU,GACpB,CACc,CACjB;QAEF;YACC,8BAAC,gBAAM,IACN,OAAO,EAAC,WAAW,EACnB,MAAM,EAAC,gBAAgB,EACvB,UAAU,EAAC,QAAQ,EACnB,OAAO,EAAE,oBAAoB,EAC7B,IAAI,EAAC,QAAQ,GACZ;YACF,8BAAC,gBAAM,IACN,OAAO,EAAC,SAAS,EACjB,MAAM,EAAC,gBAAgB,EACvB,UAAU,EAAC,OAAO,EAClB,EAAE,EAAE,uBAAU,CAAC,EAAE,EACjB,OAAO,EAAE,kBAAkB,EAC3B,IAAI,EAAC,QAAQ,GACZ,CACG,CACQ,CACf,CAAC;AACH,CAAC,CAAC;AAEF,kBAAe,gBAAgB,CAAC","sourcesContent":["import React, { ChangeEvent, KeyboardEvent, useEffect, useRef, useState } from \"react\";\n\nimport Button from \"../Button/Button\";\nimport { spacingMap } from \"../styleguide\";\n\nimport { DEFAULT_FORMAT_PATTERN } from \"./DatePicker.consts\";\nimport { getValidDate, handleInvalidDate, safeDateFormat } from \"./DatePicker.utils\";\nimport { InputContainer, Line, StyledFooter, StyledInput } from \"./DatePickerFooter.styles\";\nimport { useDatePickerPopoverContext } from \"./DatePickerPopoverContext\";\nimport { DateRangePickerProps } from \"./DateRangePicker\";\n\nexport type DatePickerFooterProps = Pick<DateRangePickerProps, \"dateFormat\" | \"placeholder\"> & {\n\tapplyOnClick: () => void;\n\tshowFooterInputs?: boolean;\n\tstartDate?: Date;\n\tendDate?: Date;\n\thandleStartDate: (date?: Date) => void;\n\thandleEndDate: (date?: Date) => void;\n\tminDate?: Date;\n\tmaxDate?: Date;\n};\n\nconst DatePickerFooter = ({\n\tapplyOnClick,\n\tshowFooterInputs = false,\n\tstartDate,\n\tendDate,\n\thandleStartDate,\n\thandleEndDate,\n\tdateFormat = DEFAULT_FORMAT_PATTERN,\n\tplaceholder,\n\tminDate,\n\tmaxDate,\n}: DatePickerFooterProps) => {\n\tconst { closeCalendarPopover } = useDatePickerPopoverContext();\n\tconst endDateInput = useRef<HTMLInputElement>(null);\n\n\tconst [startDateValue, setStartDateValue] = useState<string>(\"\");\n\tconst [endDateValue, setEndDateValue] = useState<string>(\"\");\n\n\tconst validStartDate = getValidDate(startDateValue, dateFormat, minDate, maxDate);\n\tconst validEndDate = getValidDate(endDateValue, dateFormat, minDate, maxDate);\n\n\tuseEffect(() => {\n\t\tconst newStartDateValue = startDate ? safeDateFormat(startDate, dateFormat) : \"\";\n\t\tsetStartDateValue(newStartDateValue);\n\n\t\tconst newEndDateValue = endDate ? safeDateFormat(endDate, dateFormat) : \"\";\n\t\tsetEndDateValue(newEndDateValue);\n\t}, [startDate, endDate, dateFormat]);\n\n\tconst handleApplyOnClick = () => {\n\t\tapplyOnClick();\n\t\tcloseCalendarPopover();\n\t};\n\n\tconst handleStartDateInput = (e?: ChangeEvent<HTMLInputElement>) => {\n\t\tif (!e) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetStartDateValue(e?.target.value);\n\t};\n\n\tconst handleEndDateInput = (e?: ChangeEvent<HTMLInputElement>) => {\n\t\tif (!e) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetEndDateValue(e?.target.value);\n\t};\n\n\tconst handleOnBlurStartDate = () => {\n\t\tif (!validStartDate) {\n\t\t\tif (!startDateValue) {\n\t\t\t\thandleStartDate();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn handleInvalidDate(setStartDateValue, dateFormat, startDate);\n\t\t}\n\n\t\thandleStartDate(validStartDate);\n\t};\n\n\tconst handleOnBlurEndDate = () => {\n\t\tif (!validEndDate ) {\n\t\t\tif (!endDateValue) {\n\t\t\t\thandleEndDate();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn handleInvalidDate(setEndDateValue, dateFormat, endDate);\n\t\t}\n\n\t\thandleEndDate(validEndDate);\n\t};\n\n\tconst handleOnEnterStartDate = (event?: KeyboardEvent<HTMLInputElement>) => {\n\t\tif (event?.key !== \"Enter\") {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!validStartDate) {\n\t\t\tif (!startDateValue) {\n\t\t\t\thandleStartDate();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn handleInvalidDate(setStartDateValue, dateFormat, startDate);\n\t\t}\n\n\t\thandleStartDate(validStartDate);\n\n\t\tif (endDateInput.current && !endDate && validStartDate) {\n\t\t\tendDateInput.current.focus();\n\t\t}\n\t};\n\n\tconst handleOnEnterEndDate = (event?: KeyboardEvent<HTMLInputElement>) => {\n\t\tif (event?.key !== \"Enter\") {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!validEndDate ) {\n\t\t\tif (!endDateValue) {\n\t\t\t\thandleEndDate();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn handleInvalidDate(setEndDateValue, dateFormat, endDate);\n\t\t}\n\n\t\thandleEndDate(validEndDate);\n\t};\n\n\treturn (\n\t\t<StyledFooter showInputs={showFooterInputs}>\n\t\t\t{\n\t\t\t\tshowFooterInputs && (\n\t\t\t\t\t<InputContainer>\n\t\t\t\t\t\t<StyledInput\n\t\t\t\t\t\t\tdataQA=\"start-date\"\n\t\t\t\t\t\t\tid=\"start-date\"\n\t\t\t\t\t\t\tonChange={({ event }) => handleStartDateInput(event)}\n\t\t\t\t\t\t\tvalue={startDateValue}\n\t\t\t\t\t\t\tonBlur={handleOnBlurStartDate}\n\t\t\t\t\t\t\tonKeyUp={handleOnEnterStartDate}\n\t\t\t\t\t\t\taria-label=\"start date\"\n\t\t\t\t\t\t\tplaceholder={placeholder || dateFormat}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Line />\n\t\t\t\t\t\t<StyledInput\n\t\t\t\t\t\t\tdataQA=\"end-date\"\n\t\t\t\t\t\t\tid=\"end-date\"\n\t\t\t\t\t\t\tplaceholder={placeholder || dateFormat}\n\t\t\t\t\t\t\tonChange={({ event }) => handleEndDateInput(event)}\n\t\t\t\t\t\t\tvalue={endDateValue}\n\t\t\t\t\t\t\tonKeyUp={handleOnEnterEndDate}\n\t\t\t\t\t\t\tonBlur={handleOnBlurEndDate}\n\t\t\t\t\t\t\tref={endDateInput}\n\t\t\t\t\t\t\taria-label=\"end date\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</InputContainer>\n\t\t\t\t)\n\t\t\t}\n\t\t\t<div>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\tdataQA=\"primary-button\"\n\t\t\t\t\tbuttonText=\"Cancel\"\n\t\t\t\t\tonClick={closeCalendarPopover}\n\t\t\t\t\tsize=\"Medium\"\n\t\t\t\t/>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\tdataQA=\"primary-button\"\n\t\t\t\t\tbuttonText=\"Apply\"\n\t\t\t\t\tml={spacingMap.xs}\n\t\t\t\t\tonClick={handleApplyOnClick}\n\t\t\t\t\tsize=\"Medium\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</StyledFooter>\n\t);\n};\n\nexport default DatePickerFooter;\n"]}