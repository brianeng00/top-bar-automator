{"version":3,"file":"DatePickerInput.js","sourceRoot":"","sources":["../../../src/DatePicker/DatePickerInput.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { forwardRef, KeyboardEvent, useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\n\nimport { IconName } from \"../Icon/Icon\";\nimport { Input } from \"../Input\";\nimport { pxToRem } from \"../utils\";\n\nimport { DEFAULT_FORMAT_PATTERN } from \"./DatePicker.consts\";\nimport { getValidDate, safeDateFormat } from \"./DatePicker.utils\";\n\n\nexport type DatePickerInputProps = {\n\tdataQA: string;\n\tselectedDate?: Date;\n\tsetIsCalendarOpen: (isOpen: boolean) => void;\n\tonDateChange?: (date?: Date | Date[]) => void;\n\t/**\n\t * @description label that is passed to the DatePickerInput\n\t */\n\tlabel?: string;\n\tdateFormat?: string;\n\tplaceholder?: string;\n\tinputLeftIcon?: IconName;\n\tinputRightIcon?: IconName;\n};\n\nconst StyledDatePickerInput = styled(Input) <{ leftIcon?: IconName }>`\n\t${({ leftIcon }) => `\n\t\t> div  {\n\t\t\tpadding-left: ${leftIcon ? pxToRem(12) : 0}; \n\t\t}\n\t\t> div > input {\n\t\t\tpadding-left:  ${leftIcon ? \"revert\" : pxToRem(12)};\n\t\t}\n\t`}\n`;\n\n\n/**\n * @description input that used for the single DatePicker\n */\nconst DatePickerInput = forwardRef<HTMLInputElement, DatePickerInputProps>(({\n\tdataQA,\n\tselectedDate,\n\tsetIsCalendarOpen,\n\tonDateChange,\n\tlabel = \"Date\",\n\tdateFormat = DEFAULT_FORMAT_PATTERN,\n\tplaceholder,\n\tinputLeftIcon,\n\tinputRightIcon,\n\t...propsInheritedFromRadixTrigger\n}, datePickerInputRef) => {\n\tconst [inputValue, setInputValue] = useState(\"\");\n\n\tconst newInputValue = selectedDate ? safeDateFormat(selectedDate, dateFormat) : \"\";\n\tconst newValidDate = getValidDate(inputValue, dateFormat);\n\n\tuseEffect(() => {\n\t\tsetInputValue(newInputValue);\n\t}, [newInputValue]);\n\n\tconst handleNewInvalidDate = () => {\n\t\t// aligns with the DateRangePickerInput to set the inputValue and calendar to no date selected\n\t\t// when the inputValue is empty\n\t\tif (!inputValue && onDateChange) {\n\t\t\tsetInputValue(\"\");\n\t\t\tonDateChange();\n\t\t\treturn;\n\t\t}\n\n\t\t// if there's a selected date but the new inputvalue is invalid, reset to the selected date\n\t\tif (selectedDate) {\n\t\t\tsetInputValue(safeDateFormat(selectedDate, dateFormat));\n\t\t\treturn;\n\t\t}\n\n\t\t// if there is an inputValue but that is not a valid date, set the value and calendar to nothing\n\t\tif (inputValue && !newValidDate && onDateChange) {\n\t\t\tsetInputValue(\"\");\n\t\t\tonDateChange();\n\t\t\treturn;\n\t\t}\n\t};\n\n\tconst handleOnBlur = () => {\n\t\t// prevents the input from using the same value to be able to tab into the Popover\n\t\tif (inputValue === newInputValue) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!newValidDate) {\n\t\t\thandleNewInvalidDate();\n\t\t\treturn;\n\t\t}\n\n\t\tif (newValidDate && onDateChange) {\n\t\t\tonDateChange(newValidDate);\n\t\t}\n\t};\n\n\tconst handleOnKeyUp = (event?: KeyboardEvent<HTMLInputElement>) => {\n\t\tif (event?.key !== \"Enter\") {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!newValidDate) {\n\t\t\thandleNewInvalidDate();\n\t\t\treturn;\n\t\t}\n\n\t\tif (newValidDate && onDateChange) {\n\t\t\tonDateChange(newValidDate);\n\t\t\tsetIsCalendarOpen(false);\n\t\t}\n\t};\n\n\treturn (\n\t\t<StyledDatePickerInput\n\t\t\t{...propsInheritedFromRadixTrigger}\n\t\t\ttype=\"text\"\n\t\t\tdataQA={dataQA}\n\t\t\tlabel={label}\n\t\t\tid={dataQA}\n\t\t\tvalue={inputValue}\n\t\t\tonChange={({ event }) => event && setInputValue(event.target?.value)}\n\t\t\tplaceholder={placeholder || dateFormat}\n\t\t\tref={datePickerInputRef}\n\t\t\tonKeyUp={handleOnKeyUp}\n\t\t\tonBlur={handleOnBlur}\n\t\t\tleftIcon={inputLeftIcon}\n\t\t\trightIcon={inputRightIcon}\n\t\t/>\n\t);\n});\n\nDatePickerInput.displayName = \"DatePickerInput\";\n\nexport default DatePickerInput;\n"]}