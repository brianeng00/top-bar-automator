{"version":3,"file":"FilterMenu.js","sourceRoot":"","sources":["../../../src/FilterMenu/FilterMenu.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,6CAMe;AAEf,+DAAmD;AAEnD,sCAAqC;AACrC,yDAAmC;AACnC,4CAA2C;AAC3C,kCAAmC;AAEnC,4DAAsC;AACtC,yDAM6B;AAE7B,4DAAsC;AAEtC;;;GAGG;AACH,IAAM,aAAa,GAAG,UAAC,OAAmC;IACzD,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;QACpB,OAAO,KAAK,CAAC;KACb;IAED,OAAQ,OAA8B,CAAC,CAAC,CAAC,CAAC,YAAY,KAAK,SAAS,CAAC;AACtE,CAAC,CAAC;AAEF,IAAM,kBAAkB,GAAG,UAAC,MAAwB,EAAE,GAAW,IAAK,OAAA,CACrE,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,UAAC,EAAc;QAAZ,UAAU,gBAAA;IAAO,OAAA,UAAU,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC;AAAtC,CAAsC,CAAC,CACtF,EAFqE,CAErE,CAAC;AAEF,IAAM,UAAU,GAAG,IAAA,kBAAU,EAAkC,UAAC,EAoB/D,EAAE,GAAG;IAnBL,IAAA,OAAO,aAAA,EACP,IAAI,UAAA,EACJ,KAAK,WAAA,EACL,UAAU,gBAAA,EACV,MAAM,YAAA,EACN,SAAS,eAAA,EACT,OAAO,aAAA,EACP,gBAAgB,sBAAA,EAChB,aAAa,mBAAA,EACb,UAAU,gBAAA,EACV,WAAW,iBAAA,EACX,iBAAiB,uBAAA,EACjB,wBAAwB,8BAAA,EACxB,OAAO,aAAA,EACP,aAAa,mBAAA,EACb,0BAA8B,EAA9B,kBAAkB,mBAAG,cAAQ,CAAC,KAAA,EAC9B,YAAY,kBAAA,EACZ,UAAU,gBAAA,EACP,KAAK,cAnBuD,+QAoB/D,CADQ;IAGF,IAAA,KAAsC,IAAA,gBAAQ,GAAe,EAA5D,cAAc,QAAA,EAAE,iBAAiB,QAA2B,CAAC;IAC9D,IAAA,KAAgC,IAAA,gBAAQ,EAAC,EAAE,CAAC,EAA3C,WAAW,QAAA,EAAE,cAAc,QAAgB,CAAC;IAEnD,6FAA6F;IAC7F,yFAAyF;IACzF,gFAAgF;IAChF,IAAM,eAAe,GAA+B,IAAA,eAAO,EAAC;QAC3D,IAAI,gBAAgB,EAAE;YACrB,OAAO,gBAAgB,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC;SAC9C;QAED,IAAM,GAAG,GAAG,WAAW,CAAC,WAAW,EAAE,CAAC;QAEtC,IAAI,aAAa,CAAC,OAAO,CAAC,EAAE;YAC3B,IAAM,iBAAe,GAAuB,EAAE,CAAC;YAE/C,OAAO,CAAC,OAAO,CAAC,UAAC,MAAM;gBACtB,IAAM,oBAAoB,GAAG,kBAAkB,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;gBAC7D,IAAI,CAAC,oBAAoB,CAAC,MAAM,EAAE;oBACjC,OAAO;iBACP;gBACD,iBAAe,CAAC,IAAI,CAAC;oBACpB,KAAK,EAAE,MAAM,CAAC,KAAK;oBACnB,YAAY,EAAE,oBAAoB;iBAClC,CAAC,CAAC;YACJ,CAAC,CAAC,CAAC;YAEH,OAAO,iBAAe,CAAC;SACvB;aAAM;YACN,OAAO,OAAO,CAAC,MAAM,CAAC,UAAC,EAAc;oBAAZ,UAAU,gBAAA;gBAAO,OAAA,UAAU,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC;YAAtC,CAAsC,CAAC,CAAC;SAClF;IACF,CAAC,EAAE,CAAC,gBAAgB,EAAE,WAAW,EAAE,OAAO,CAAC,CAAC,CAAC;IAE7C,IAAM,aAAa,GAAG,aAAa,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CACtD,eAAe,CAAC,OAAO,CAAC,UAAC,WAAW,IAAK,OAAA,WAAW,CAAC,YAAY,EAAxB,CAAwB,CAAC,CAAC,MAAM,CACzE,CAAC,CAAC,CAAC,eAAe,CAAC,MAAM,CAAC;IAE3B,+JAA+J;IAC/J,IAAM,gBAAgB,GAAG,aAAa,GAAG,CAAC,CAAC;IAErC,IAAA,KAAoB,IAAA,gBAAQ,EAAC,CAAC,CAAC,EAA9B,KAAK,QAAA,EAAE,QAAQ,QAAe,CAAC;IAEtC,IAAM,kBAAkB,GAAG,UAAC,CAAsC;QACjE,IAAI,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;YAC7C,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,IAAM,IAAI,GAAG,CAAC,CAAC,GAAG,KAAK,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5C,QAAQ,CAAC,CAAC,KAAK,GAAG,IAAI,GAAG,gBAAgB,CAAC,GAAG,gBAAgB,CAAC,CAAC;SAC/D;IACF,CAAC,CAAC;IAEF,IAAM,QAAQ,GAAG,IAAA,cAAM,EAAmB,IAAI,CAAC,CAAC;IAC1C,IAAA,KAA0B,IAAA,gBAAQ,EAAC,KAAK,CAAC,EAAxC,QAAQ,QAAA,EAAE,WAAW,QAAmB,CAAC;IAGhD,IAAM,kBAAkB,GAAG,UAAC,IAAa;QACxC,IAAI,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,eAAe,EAAE;YAC1E,WAAW,CAAC,CAAC,IAAI,CAAC,CAAC;SACnB;aAAM,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,OAAO,CAAC,MAAM,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,eAAe,EAAE;YACpF,WAAW,CAAC,CAAC,IAAI,CAAC,CAAC;SACnB;QAED,WAAW,CAAC,IAAI,CAAC,CAAC;IACnB,CAAC,CAAC;IAEF,IAAM,aAAa,GAAG;QACrB,QAAQ,CAAC,CAAC,CAAC,CAAC;IACb,CAAC,CAAC;IAEF,IAAA,iBAAS,EAAC;;QACT,IAAI,QAAQ,EAAE;YACb,IAAI,KAAK,KAAK,CAAC,EAAE;gBAChB,MAAA,QAAQ,CAAC,OAAO,0CAAE,KAAK,EAAE,CAAC;aAC1B;iBAAM;gBACN,MAAA,QAAQ,CAAC,OAAO,0CAAE,IAAI,EAAE,CAAC;aACzB;SACD;IACF,CAAC,EAAE,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC;IAEtB,IAAM,iBAAiB,GAAG,UAAC,UAAkB;QAC5C,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,EAAE;YACpC,OAAO,CAAC,CAAC;SACT;QAED,IAAM,oBAAoB,GAAG,eAAe,CAAC,OAAO,CAAC,UAAC,WAAW,IAAK,OAAA,WAAW,CAAC,YAAY,EAAxB,CAAwB,CAAC,CAAC;QAChG,OAAO,oBAAoB,CAAC,SAAS,CAAC,UAAC,kBAAkB,IAAK,OAAA,kBAAkB,CAAC,UAAU,KAAK,UAAU,EAA5C,CAA4C,CAAC,CAAC;IAC7G,CAAC,CAAC;IAEF,IAAM,gBAAgB,GAAG;QACxB,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE;YAC5B,OAAO,CACN,8BAAC,mCAAe,IACf,EAAE,EAAE,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAA,eAAO,EAAC,EAAE,CAAC,EAClC,MAAM,EAAC,WAAW,EAClB,OAAO,EAAC,cAAc,wBAGL,CAClB,CAAC;SACF;QAED,IAAI,aAAa,CAAC,eAAe,CAAC,EAAE;YACnC,OAAO,eAAe,CAAC,GAAG,CAAC,UAAC,iBAAiB,EAAE,sBAAsB,IAAK,OAAA,CACzE,8BAAC,eAAK,CAAC,QAAQ,IAAC,GAAG,EAAE,UAAG,iBAAiB,CAAC,KAAK,cAAI,sBAAsB,CAAE;gBAC1E,8BAAC,uBAAU,IACV,OAAO,EAAC,cAAc,EACtB,MAAM,EAAC,qBAAqB,IAE3B,iBAAiB,CAAC,KAAK,CACZ;gBACZ,iBAAiB,CAAC,YAAY,CAAC,GAAG,CAAC,UAAC,WAAW,EAAE,KAAK,IAAK,OAAA,CAC3D,8BAAC,oBAAU,IACV,MAAM,EAAE,UAAG,MAAM,wBAAc,KAAK,CAAE,EACtC,MAAM,EAAE,WAAW,EACnB,GAAG,EAAE,UAAG,WAAW,CAAC,UAAU,SAAG,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAE,EACnF,QAAQ,EAAE,QAAQ,EAClB,iBAAiB,EAAE,iBAAiB;oBACpC,2DAA2D;oBAC3D,KAAK,EAAE,CAAC,KAAK,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,KAAK,iBAAiB,CAAC,WAAW,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,EACjF,KAAK,EAAE,iBAAiB,CAAC,WAAW,CAAC,UAAU,CAAC,GAAG,CAAC,EACpD,kBAAkB,EAAE,kBAAkB,EACtC,SAAS,EAAE,cAAM,OAAA,WAAW,CAAC,KAAK,CAAC,EAAlB,CAAkB,iBACtB,YAAY,KAAK,WAAW,CAAC,QAAQ,IAAI,YAAY,KAAK,WAAW,CAAC,UAAU,GAC5F,CACF,EAd2D,CAc3D,CAAC,CACc,CACjB,EAxByE,CAwBzE,CAAC,CAAC;SACH;QAED,OAAO,eAAe,CAAC,GAAG,CAAC,UAAC,YAAY,EAAE,iBAAiB,IAAK,OAAA,CAC/D,8BAAC,oBAAU,IACV,MAAM,EAAE,UAAG,MAAM,wBAAc,iBAAiB,CAAE,EAClD,MAAM,EAAE,YAAY,EACpB,GAAG,EAAE,UAAG,YAAY,CAAC,UAAU,SAAG,YAAY,CAAC,QAAQ,CAAC,CAAC,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAE,EACtF,QAAQ,EAAE,QAAQ,EAClB,iBAAiB,EAAE,iBAAiB;YACpC,2DAA2D;YAC3D,KAAK,EAAE,CAAC,KAAK,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,KAAK,iBAAiB,GAAG,CAAC,CAAC,EACzD,KAAK,EAAE,iBAAiB,GAAG,CAAC,EAC5B,kBAAkB,EAAE,kBAAkB,EACtC,SAAS,EAAE,cAAM,OAAA,WAAW,CAAC,KAAK,CAAC,EAAlB,CAAkB,iBACtB,YAAY,KAAK,YAAY,CAAC,QAAQ,IAAI,YAAY,KAAK,YAAY,CAAC,UAAU,GAC9F,CACF,EAd+D,CAc/D,CAAC,CAAC;IACJ,CAAC,CAAC;IAEF,OAAO,CACN,8BAAC,qCAAiB,aACjB,IAAI,EAAE,QAAQ,EACd,YAAY,EAAE,UAAC,IAAI;YAClB,kBAAkB,CAAC,IAAI,CAAC,CAAC;QAC1B,CAAC,IACG,iBAAiB,EACjB,KAAK;QAET,8BAAC,OAAO,CAAC,OAAO,IAAC,OAAO,UACtB,OAAO,CACS;QAClB,8BAAC,uCAAmB,mBACN,WAAW,gBACZ,UAAU;YAEtB,8BAAC,wCAAoB,aACpB,SAAS,EAAE,kBAAkB,EAC7B,GAAG,EAAE,GAAG,iBACK,WAAW,gBACZ,UAAU,aACb,OAAO,EAChB,KAAK,EAAE,KAAK,EACZ,IAAI,EAAE,IAAI,EACV,UAAU,EAAE,UAAU,EACtB,IAAI,EAAC,UAAU,IACX,wBAAwB,GAE3B,cAAc,CAAC,CAAC,CAAC,CACjB,8BAAC,oBAAU,IACV,QAAQ,EAAE,cAAc,CAAC,QAAQ,EACjC,UAAU,EAAE,cAAc,CAAC,UAAU,EACrC,eAAe,EAAE,cAAM,OAAA,iBAAiB,CAAC,SAAS,CAAC,EAA5B,CAA4B,EACnD,eAAe,EAAE,cAAc,CAAC,eAAe,EAC/C,aAAa,EAAE,aAAa,EAC5B,MAAM,EAAE,MAAM,EACd,SAAS,EAAE,SAAS,gBACR,UAAU,iBACT,WAAW,EACxB,aAAa,EAAE,aAAa,GAC3B,CACF,CAAC,CAAC,CAAC,CACH;gBACC,8BAAC,gCAAY;oBACZ,8BAAC,eAAK,IACL,EAAE,EAAC,eAAe,EAClB,MAAM,EAAC,eAAe,EACtB,QAAQ,EAAE,UAAC,EAAS;gCAAP,KAAK,WAAA;4BAAO,OAAA,KAAK,IAAI,cAAc,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC;wBAA3C,CAA2C,EACpE,WAAW,EAAC,QAAQ,EACpB,QAAQ,EAAC,QAAQ,EACjB,GAAG,EAAC,QAAQ,EACZ,OAAO,EAAE,aAAa,EACtB,KAAK,EAAE,WAAW,EAClB,GAAG,EAAE,QAAQ,gBACF,8BAA8B,GACxC;oBACD,UAAU,IAAI,CACd;wBACC,8BAAC,qCAAiB,QAChB,UAAU,CACQ;wBACpB,8BAAC,iBAAO,IAAC,MAAM,EAAC,qBAAqB,GAAG,CACtC,CACH,CACa;gBACf,8BAAC,8BAAU,mBACG,WAAW,aACf,UAAG,MAAM,iBAAc,IAE/B,gBAAgB,EAAE,CACP,CACX,CACH,CACqB,CACF,CACH,CACpB,CAAC;AACH,CAAC,CAAC,CAAC;AAEH,UAAU,CAAC,WAAW,GAAG,YAAY,CAAC;AAEtC,kBAAe,UAAU,CAAC","sourcesContent":["import React, {\n\tforwardRef,\n\tuseEffect,\n\tuseMemo,\n\tuseRef,\n\tuseState,\n} from \"react\";\n\nimport * as Popover from \"@radix-ui/react-popover\";\n\nimport { Divider } from \"../Divider\";\nimport Input from \"../Input/Input\";\nimport { Typography } from \"../Typography\";\nimport { pxToRem } from \"../utils\";\n\nimport FilterItem from \"./FilterItem\";\nimport {\n\tFilterList, InputWrapper,\n\tNoResultMessage,\n\tStyledPopoverContent, StyledPopoverPortal,\n\tStyledPopoverRoot,\n\tTopActionsWrapper,\n} from \"./FilterMenu.styles\";\nimport { FilterMenuProps, FilterProps, GroupFilterProps } from \"./FilterMenu.types\";\nimport FilterPage from \"./FilterPage\";\n\n/**\n * @description Custom type guard to check if filters is of GroupFilterProps type\n * @see https://www.typescriptlang.org/docs/handbook/advanced-types.html#user-defined-type-guards\n */\nconst isGroupFilter = (filters: FilterMenuProps[\"filters\"]): filters is GroupFilterProps[] => {\n\tif (!filters.length) {\n\t\treturn false;\n\t}\n\n\treturn (filters as GroupFilterProps[])[0].groupFilters !== undefined;\n};\n\nconst filterGroupFilters = (filter: GroupFilterProps, val: string) => (\n\tfilter.groupFilters.filter(({ filterName }) => filterName.toLowerCase().includes(val))\n);\n\nconst FilterMenu = forwardRef<HTMLDivElement, FilterMenuProps>(({\n\ttrigger,\n\tside,\n\talign,\n\tsideOffset,\n\tdataQA,\n\tariaLabel,\n\tfilters,\n\tcustomSearchFunc,\n\taddButtonFunc,\n\t$menuWidth,\n\t$menuHeight,\n\tradixPopoverProps,\n\tradixPopoverContentProps,\n\t$zIndex,\n\taddButtonText,\n\tonSelectFilterFunc = () => { },\n\titemSelected,\n\ttopActions,\n\t...props\n}, ref) => {\n\n\tconst [selectedFilter, setSelectedFilter] = useState<FilterProps>();\n\tconst [searchValue, setSearchValue] = useState(\"\");\n\n\t// searchedFilters is the result of the provided filter prop, with text search applied to it.\n\t// It is re-computed every time the searchValue, filter prop of customSearchFunc changes.\n\t// Ultimately, it is the list of filters that will be displayed in the dropdown.\n\tconst searchedFilters: FilterMenuProps[\"filters\"] = useMemo(() => {\n\t\tif (customSearchFunc) {\n\t\t\treturn customSearchFunc(searchValue, filters);\n\t\t}\n\n\t\tconst val = searchValue.toLowerCase();\n\n\t\tif (isGroupFilter(filters)) {\n\t\t\tconst newGroupFilters: GroupFilterProps[] = [];\n\n\t\t\tfilters.forEach((filter) => {\n\t\t\t\tconst filteredGroupFilters = filterGroupFilters(filter, val);\n\t\t\t\tif (!filteredGroupFilters.length) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tnewGroupFilters.push({\n\t\t\t\t\tlabel: filter.label,\n\t\t\t\t\tgroupFilters: filteredGroupFilters,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn newGroupFilters;\n\t\t} else {\n\t\t\treturn filters.filter(({ filterName }) => filterName.toLowerCase().includes(val));\n\t\t}\n\t}, [customSearchFunc, searchValue, filters]);\n\n\tconst filtersLength = isGroupFilter(searchedFilters) ? (\n\t\tsearchedFilters.flatMap((groupFilter) => groupFilter.groupFilters).length\n\t) : searchedFilters.length;\n\n\t// Adding +1 here, as we want the input to focusable by keyboard. Therefore, the input will have an index of 0, and each list item will have an index of index+\n\tconst filtersWithInput = filtersLength + 1;\n\n\tconst [focus, setFocus] = useState(0);\n\n\tconst handleKeyDownFocus = (e: React.KeyboardEvent<HTMLDivElement>) => {\n\t\tif ([\"ArrowDown\", \"ArrowUp\"].includes(e.key)) {\n\t\t\te.preventDefault();\n\t\t\tconst mode = e.key === \"ArrowDown\" ? 1 : -1;\n\t\t\tsetFocus((focus + mode + filtersWithInput) % filtersWithInput);\n\t\t}\n\t};\n\n\tconst inputRef = useRef<HTMLInputElement>(null);\n\tconst [openMenu, setOpenMenu] = useState(false);\n\n\n\tconst customOnOpenChange = (prev: boolean) => {\n\t\tif (isGroupFilter(filters) && !filters[0].groupFilters[0].filterComponent) {\n\t\t\tsetOpenMenu(!prev);\n\t\t} else if (!isGroupFilter(filters) && filters.length && !filters[0].filterComponent) {\n\t\t\tsetOpenMenu(!prev);\n\t\t}\n\n\t\tsetOpenMenu(prev);\n\t};\n\n\tconst handleOnFocus = () => {\n\t\tsetFocus(0);\n\t};\n\n\tuseEffect(() => {\n\t\tif (inputRef) {\n\t\t\tif (focus === 0) {\n\t\t\t\tinputRef.current?.focus();\n\t\t\t} else {\n\t\t\t\tinputRef.current?.blur();\n\t\t\t}\n\t\t}\n\t}, [focus, inputRef]);\n\n\tconst getGroupItemIndex = (filterName: string) => {\n\t\tif (!isGroupFilter(searchedFilters)) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tconst flattendGroupFilters = searchedFilters.flatMap((groupFilter) => groupFilter.groupFilters);\n\t\treturn flattendGroupFilters.findIndex((flattenGroupFilter) => flattenGroupFilter.filterName === filterName);\n\t};\n\n\tconst renderFilterItem = () => {\n\t\tif (!searchedFilters.length) {\n\t\t\treturn (\n\t\t\t\t<NoResultMessage\n\t\t\t\t\tmt={topActions ? \"0\" : pxToRem(40)}\n\t\t\t\t\tdataQA=\"no-result\"\n\t\t\t\t\tvariant=\"displaySmall\"\n\t\t\t\t>\n\t\t\t\t\tNo results found.\n\t\t\t\t</NoResultMessage>\n\t\t\t);\n\t\t}\n\n\t\tif (isGroupFilter(searchedFilters)) {\n\t\t\treturn searchedFilters.map((searchGroupFilter, searchGroupFilterIndex) => (\n\t\t\t\t<React.Fragment key={`${searchGroupFilter.label}-${searchGroupFilterIndex}`}>\n\t\t\t\t\t<Typography\n\t\t\t\t\t\tvariant=\"bodyCopyBold\"\n\t\t\t\t\t\tdataQA=\"search-filter-label\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{searchGroupFilter.label}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t{searchGroupFilter.groupFilters.map((groupFilter, index) => (\n\t\t\t\t\t\t<FilterItem\n\t\t\t\t\t\t\tdataQA={`${dataQA}-list-item-${index}`}\n\t\t\t\t\t\t\tfilter={groupFilter}\n\t\t\t\t\t\t\tkey={`${groupFilter.filterName}${groupFilter.filterId ? groupFilter.filterId : \"\"}`}\n\t\t\t\t\t\t\tsetFocus={setFocus}\n\t\t\t\t\t\t\tsetSelectedFilter={setSelectedFilter}\n\t\t\t\t\t\t\t// required to prevent input from losing focus while typing\n\t\t\t\t\t\t\tfocus={(focus !== 0) && (focus === getGroupItemIndex(groupFilter.filterName) + 1)}\n\t\t\t\t\t\t\tindex={getGroupItemIndex(groupFilter.filterName) + 1}\n\t\t\t\t\t\t\tonSelectFilterFunc={onSelectFilterFunc}\n\t\t\t\t\t\t\tcloseMenu={() => setOpenMenu(false)}\n\t\t\t\t\t\t\t$isSelected={itemSelected === groupFilter.filterId || itemSelected === groupFilter.filterName}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</React.Fragment>\n\t\t\t));\n\t\t}\n\n\t\treturn searchedFilters.map((searchFilter, searchFilterIndex) => (\n\t\t\t<FilterItem\n\t\t\t\tdataQA={`${dataQA}-list-item-${searchFilterIndex}`}\n\t\t\t\tfilter={searchFilter}\n\t\t\t\tkey={`${searchFilter.filterName}${searchFilter.filterId ? searchFilter.filterId : \"\"}`}\n\t\t\t\tsetFocus={setFocus}\n\t\t\t\tsetSelectedFilter={setSelectedFilter}\n\t\t\t\t// required to prevent input from losing focus while typing\n\t\t\t\tfocus={(focus !== 0) && (focus === searchFilterIndex + 1)}\n\t\t\t\tindex={searchFilterIndex + 1}\n\t\t\t\tonSelectFilterFunc={onSelectFilterFunc}\n\t\t\t\tcloseMenu={() => setOpenMenu(false)}\n\t\t\t\t$isSelected={itemSelected === searchFilter.filterId || itemSelected === searchFilter.filterName}\n\t\t\t/>\n\t\t));\n\t};\n\n\treturn (\n\t\t<StyledPopoverRoot\n\t\t\topen={openMenu}\n\t\t\tonOpenChange={(prev) => {\n\t\t\t\tcustomOnOpenChange(prev);\n\t\t\t}}\n\t\t\t{...radixPopoverProps}\n\t\t\t{...props}\n\t\t>\n\t\t\t<Popover.Trigger asChild>\n\t\t\t\t{trigger}\n\t\t\t</Popover.Trigger>\n\t\t\t<StyledPopoverPortal\n\t\t\t\t$menuHeight={$menuHeight}\n\t\t\t\t$menuWidth={$menuWidth}\n\t\t\t>\n\t\t\t\t<StyledPopoverContent\n\t\t\t\t\tonKeyDown={handleKeyDownFocus}\n\t\t\t\t\tref={ref}\n\t\t\t\t\t$menuHeight={$menuHeight}\n\t\t\t\t\t$menuWidth={$menuWidth}\n\t\t\t\t\t$zIndex={$zIndex}\n\t\t\t\t\talign={align}\n\t\t\t\t\tside={side}\n\t\t\t\t\tsideOffset={sideOffset}\n\t\t\t\t\trole=\"combobox\"\n\t\t\t\t\t{...radixPopoverContentProps}\n\t\t\t\t>\n\t\t\t\t\t{selectedFilter ? (\n\t\t\t\t\t\t<FilterPage\n\t\t\t\t\t\t\tfilterId={selectedFilter.filterId}\n\t\t\t\t\t\t\tfilterName={selectedFilter.filterName}\n\t\t\t\t\t\t\tcloseButtonFunc={() => setSelectedFilter(undefined)}\n\t\t\t\t\t\t\tfilterComponent={selectedFilter.filterComponent}\n\t\t\t\t\t\t\taddButtonFunc={addButtonFunc}\n\t\t\t\t\t\t\tdataQA={dataQA}\n\t\t\t\t\t\t\tariaLabel={ariaLabel}\n\t\t\t\t\t\t\t$menuWidth={$menuWidth}\n\t\t\t\t\t\t\t$menuHeight={$menuHeight}\n\t\t\t\t\t\t\taddButtonText={addButtonText}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<InputWrapper>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tid=\"filter-search\"\n\t\t\t\t\t\t\t\t\tdataQA=\"filter-search\"\n\t\t\t\t\t\t\t\t\tonChange={({ event }) => event && setSearchValue(event.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder=\"Search\"\n\t\t\t\t\t\t\t\t\tleftIcon=\"Search\"\n\t\t\t\t\t\t\t\t\tkey=\"search\"\n\t\t\t\t\t\t\t\t\tonFocus={handleOnFocus}\n\t\t\t\t\t\t\t\t\tvalue={searchValue}\n\t\t\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\t\t\taria-label=\"type text or select a filter\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{topActions && (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<TopActionsWrapper>\n\t\t\t\t\t\t\t\t\t\t\t{topActions}\n\t\t\t\t\t\t\t\t\t\t</TopActionsWrapper>\n\t\t\t\t\t\t\t\t\t\t<Divider dataQA=\"top-actions-divider\" />\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</InputWrapper>\n\t\t\t\t\t\t\t<FilterList\n\t\t\t\t\t\t\t\t$menuHeight={$menuHeight}\n\t\t\t\t\t\t\t\tdata-qa={`${dataQA}-filter-list`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{renderFilterItem()}\n\t\t\t\t\t\t\t</FilterList>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</StyledPopoverContent>\n\t\t\t</StyledPopoverPortal>\n\t\t</StyledPopoverRoot>\n\t);\n});\n\nFilterMenu.displayName = \"FilterMenu\";\n\nexport default FilterMenu;\n"]}